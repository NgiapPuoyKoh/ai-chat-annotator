{% extends "base.html" %}
{% block content %}

<h3 class="light-blue-text text-darken-4 center-align">Pending Chats List</h3>

<div class="row card-panel grey lighten-5">
    <div class="col s12 m8 offset-m2" method="POST" action="{{ url_for('chatlist') }}">
        <div class="row">
            <ul class="collapsible">
                {% for conversation in conversations %}
                {% if conversation.status == "pending" %}
                <li>
                    <div class="collapsible-header white-text light-blue darken-4 text-shadow">
                        <div class="col s12">
                            <i class="fas fa-caret-down"></i>
                            <!-- trigger python function to respond to pending Chat -->
                            <a href="{{ url_for('chatlist', activeconv = conversation._id)}}"
                                class="btn-small light-blue lighten-1">Respond</a>
                            <!-- <a href="" class="btn-small green accent-4">Done</a> -->
                        </div>
                        <div class="col s12">
                            <strong>{{-  conversation.topic_name  }} {{  conversation.timestamp -}}</strong>
                            <i class="fas fa-exclamation-circle light-blue-text text-lighten-2"></i>
                            <!-- <button type="submit" class="col s12 btn-large light-blue text-darken-4 tooltipped"
                        data-position="right" data-tooltip="Moderate Chat">
                        Moderate Chat <i class="far fa-comments"></i>
                    </button> -->
                        </div>
                    </div>

                    <div class="collapsible-body">
                        <strong>{{ conversation.username }}</strong>
                        <strong>{{ conversation.moderator }}</strong>
                        <p>{{ conversation._id }}</p>
                    </div>
                </li>
                {% endif %}
                {% endfor %}
            </ul>
        </div>
        <div class="row">
            <ul class="collection with-header">
                <li class="collection-header">
                    <h4>Chat</h4>
                </li>
                {% if activeconv %}
                <li class="collection-item" id="activeconv" name="activeconv">
                    [{{activeconv.timestamp}}]: ({{activeconv.topic_name}})
                    {{ activeconv.username }}
                </li>
                {% endif %}
            </ul>
        </div>
        <!-- <div class="row">
            <form class="col s12">
                <div class="row">
                    <div class="input-field col s12">
                        <textarea id="textarea2" class="materialize-textarea" data-length="120"></textarea>
                        <label for="textarea2">Textarea</label>
                    </div>
                </div>
            </form>
        </div> -->
    </div>
</div>
{% endblock %}